digraph G {
  rankdir = "RL";
  node [shape = rect, fontname = "sans-serif"];
  "data.aws_caller_identity.current" [label="data.aws_caller_identity.current"];
  subgraph "cluster_module.flask_app_cluster" {
    label = "module.flask_app_cluster"
    fontname = "sans-serif"
    "module.flask_app_cluster.data.aws_region.current" [label="data.aws_region.current"];
    "module.flask_app_cluster.aws_cloudwatch_log_group.log_group" [label="aws_cloudwatch_log_group.log_group"];
    "module.flask_app_cluster.aws_ecs_cluster.app_cluster" [label="aws_ecs_cluster.app_cluster"];
    "module.flask_app_cluster.aws_ecs_service.service" [label="aws_ecs_service.service"];
    "module.flask_app_cluster.aws_ecs_task_definition.task_definition" [label="aws_ecs_task_definition.task_definition"];
    "module.flask_app_cluster.aws_iam_role.ecs_task_execution_role" [label="aws_iam_role.ecs_task_execution_role"];
    "module.flask_app_cluster.aws_iam_role.ecs_task_role" [label="aws_iam_role.ecs_task_role"];
    "module.flask_app_cluster.aws_iam_role_policy_attachment.ecs_task_execution_role_policy" [label="aws_iam_role_policy_attachment.ecs_task_execution_role_policy"];
  }
  subgraph "cluster_module.flask_app_ecr" {
    label = "module.flask_app_ecr"
    fontname = "sans-serif"
    "module.flask_app_ecr.aws_ecr_lifecycle_policy.flask_app_policy" [label="aws_ecr_lifecycle_policy.flask_app_policy"];
    "module.flask_app_ecr.aws_ecr_repository.ecr" [label="aws_ecr_repository.ecr"];
  }
  subgraph "cluster_module.vpc" {
    label = "module.vpc"
    fontname = "sans-serif"
    "module.vpc.data.aws_availability_zones.available" [label="data.aws_availability_zones.available"];
    "module.vpc.data.aws_caller_identity.current" [label="data.aws_caller_identity.current"];
    "module.vpc.data.aws_region.current" [label="data.aws_region.current"];
    "module.vpc.aws_eip.nat" [label="aws_eip.nat"];
    "module.vpc.aws_internet_gateway.main" [label="aws_internet_gateway.main"];
    "module.vpc.aws_nat_gateway.main" [label="aws_nat_gateway.main"];
    "module.vpc.aws_network_acl.public-nacl" [label="aws_network_acl.public-nacl"];
    "module.vpc.aws_route_table.db" [label="aws_route_table.db"];
    "module.vpc.aws_route_table.private" [label="aws_route_table.private"];
    "module.vpc.aws_route_table.public" [label="aws_route_table.public"];
    "module.vpc.aws_route_table_association.db" [label="aws_route_table_association.db"];
    "module.vpc.aws_route_table_association.private" [label="aws_route_table_association.private"];
    "module.vpc.aws_route_table_association.public" [label="aws_route_table_association.public"];
    "module.vpc.aws_security_group.db" [label="aws_security_group.db"];
    "module.vpc.aws_security_group.public" [label="aws_security_group.public"];
    "module.vpc.aws_subnet.db" [label="aws_subnet.db"];
    "module.vpc.aws_subnet.private" [label="aws_subnet.private"];
    "module.vpc.aws_subnet.public" [label="aws_subnet.public"];
    "module.vpc.aws_vpc.main" [label="aws_vpc.main"];
    "module.vpc.aws_vpc_endpoint.s3" [label="aws_vpc_endpoint.s3"];
    "module.vpc.aws_vpc_endpoint_route_table_association.s3-endpoint" [label="aws_vpc_endpoint_route_table_association.s3-endpoint"];
    "module.vpc.aws_vpc_security_group_egress_rule.all_outbound_db" [label="aws_vpc_security_group_egress_rule.all_outbound_db"];
    "module.vpc.aws_vpc_security_group_egress_rule.all_outbound_pub" [label="aws_vpc_security_group_egress_rule.all_outbound_pub"];
    "module.vpc.aws_vpc_security_group_ingress_rule.open_public_ports" [label="aws_vpc_security_group_ingress_rule.open_public_ports"];
    "module.vpc.aws_vpc_security_group_ingress_rule.rds_ingress" [label="aws_vpc_security_group_ingress_rule.rds_ingress"];
  }
  "module.flask_app_cluster.aws_ecs_service.service" -> "module.flask_app_cluster.aws_ecs_cluster.app_cluster";
  "module.flask_app_cluster.aws_ecs_service.service" -> "module.flask_app_cluster.aws_ecs_task_definition.task_definition";
  "module.flask_app_cluster.aws_ecs_service.service" -> "module.vpc.aws_security_group.public";
  "module.flask_app_cluster.aws_ecs_service.service" -> "module.vpc.aws_subnet.public";
  "module.flask_app_cluster.aws_ecs_task_definition.task_definition" -> "module.flask_app_cluster.data.aws_region.current";
  "module.flask_app_cluster.aws_ecs_task_definition.task_definition" -> "module.flask_app_cluster.aws_iam_role.ecs_task_execution_role";
  "module.flask_app_cluster.aws_ecs_task_definition.task_definition" -> "module.flask_app_ecr.aws_ecr_repository.ecr";
  "module.flask_app_cluster.aws_iam_role_policy_attachment.ecs_task_execution_role_policy" -> "module.flask_app_cluster.aws_iam_role.ecs_task_execution_role";
  "module.flask_app_ecr.aws_ecr_lifecycle_policy.flask_app_policy" -> "module.flask_app_ecr.aws_ecr_repository.ecr";
  "module.vpc.aws_internet_gateway.main" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_nat_gateway.main" -> "module.vpc.aws_eip.nat";
  "module.vpc.aws_nat_gateway.main" -> "module.vpc.aws_internet_gateway.main";
  "module.vpc.aws_nat_gateway.main" -> "module.vpc.aws_subnet.public";
  "module.vpc.aws_network_acl.public-nacl" -> "module.vpc.aws_subnet.public";
  "module.vpc.aws_route_table.db" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_route_table.private" -> "module.vpc.aws_nat_gateway.main";
  "module.vpc.aws_route_table.public" -> "module.vpc.aws_internet_gateway.main";
  "module.vpc.aws_route_table_association.db" -> "module.vpc.aws_route_table.db";
  "module.vpc.aws_route_table_association.db" -> "module.vpc.aws_subnet.db";
  "module.vpc.aws_route_table_association.private" -> "module.vpc.aws_route_table.private";
  "module.vpc.aws_route_table_association.private" -> "module.vpc.aws_subnet.private";
  "module.vpc.aws_route_table_association.public" -> "module.vpc.aws_route_table.public";
  "module.vpc.aws_route_table_association.public" -> "module.vpc.aws_subnet.public";
  "module.vpc.aws_security_group.db" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_security_group.public" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_subnet.db" -> "module.vpc.data.aws_availability_zones.available";
  "module.vpc.aws_subnet.db" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_subnet.private" -> "module.vpc.data.aws_availability_zones.available";
  "module.vpc.aws_subnet.private" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_subnet.public" -> "module.vpc.data.aws_availability_zones.available";
  "module.vpc.aws_subnet.public" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_vpc.main" -> "module.vpc.data.aws_region.current";
  "module.vpc.aws_vpc_endpoint.s3" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_vpc_endpoint_route_table_association.s3-endpoint" -> "module.vpc.aws_route_table.db";
  "module.vpc.aws_vpc_endpoint_route_table_association.s3-endpoint" -> "module.vpc.aws_vpc_endpoint.s3";
  "module.vpc.aws_vpc_security_group_egress_rule.all_outbound_db" -> "module.vpc.aws_security_group.db";
  "module.vpc.aws_vpc_security_group_egress_rule.all_outbound_pub" -> "module.vpc.aws_security_group.public";
  "module.vpc.aws_vpc_security_group_ingress_rule.open_public_ports" -> "module.vpc.aws_security_group.public";
  "module.vpc.aws_vpc_security_group_ingress_rule.rds_ingress" -> "module.vpc.aws_security_group.db";
}
